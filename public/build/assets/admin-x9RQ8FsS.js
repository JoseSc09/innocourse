import"./all.min-BoHjmthL.js";document.addEventListener("DOMContentLoaded",()=>{const e=document.getElementById("dark-mode-toggle"),t=document.documentElement,n=s=>{s?(t.classList.add("dark"),e.classList.add("active")):(t.classList.remove("dark"),e.classList.remove("active"))},a=localStorage.getItem("dark-mode")==="true";n(a),e&&e.addEventListener("click",()=>{const s=!t.classList.contains("dark");n(s),localStorage.setItem("dark-mode",s)})});const g=document.getElementById("user-menu-button"),y=document.getElementById("user-dropdown");g.addEventListener("click",function(){const e=g.getAttribute("aria-expanded")==="true";g.setAttribute("aria-expanded",!e),y.classList.toggle("hidden")});window.addEventListener("click",function(e){!g.contains(e.target)&&!y.contains(e.target)&&y.classList.add("hidden")});const x=document.getElementById("button-dropdown-users-sidebar"),E=document.getElementById("dropdown-users-side-bar");x.addEventListener("click",function(){E.classList.toggle("hidden")});const h=document.getElementById("hamburder-button"),k=document.getElementById("sidebar");h.addEventListener("click",function(){k.classList.toggle("translate-x-0")});const u=document.getElementById("image"),f=document.getElementById("file_name");u&&u.addEventListener("change",function(){if(u.files.length>0){const e=u.files[0].name;f.textContent=`Archivo seleccionado: ${e}`}else f.textContent="No se ha seleccionado ningún archivo"});window.openModal=function(e){const t=document.getElementById("deleteModal"),n=document.getElementById("deleteForm");t&&n&&(t.style.display="flex",n.action=e)};window.closeModal=function(){const e=document.getElementById("deleteModal");e&&(e.style.display="none")};document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(".toggle-section").forEach(i=>{i.addEventListener("click",function(){const m=this.getAttribute("data-section"),l=document.getElementById(m);l.style.maxHeight?l.style.maxHeight=null:l.style.maxHeight=l.scrollHeight+"px"})});const t=document.querySelectorAll(".open-modal"),n=document.getElementById("lessonModal"),a=document.getElementById("modalLessonTitle"),s=document.getElementById("modalLessonImage"),r=document.getElementById("closeModal");t.forEach(i=>{i.addEventListener("click",function(){const m=this.getAttribute("data-lesson"),l=this.getAttribute("data-content");a.textContent=m,s.src=l,n.classList.remove("hidden"),n.style.display="flex"})}),r&&r.addEventListener("click",function(){n.classList.add("hidden"),n.style.display="none"}),window.addEventListener("click",function(i){i.target==n&&(n.classList.add("hidden"),n.style.display="none")})});document.addEventListener("DOMContentLoaded",function(){const e=document.querySelector("#sections-container");let t=document.querySelectorAll(".section").length;const n=document.getElementById("sections_to_delete"),a=document.getElementById("lessons_to_delete");let s=[],r=[];const i=()=>{const o=`
            <div class="mb-4 section border-b-2 dark:border-gray-500 border-gray-400">
                <div class="mb-2">
                    <label for="sections[${t}][section_name]"
                        class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Nombre de la Sección</label>
                    <input type="text" name="sections[${t}][section_name]" id="sections[${t}][section_name]"
                        class="block w-full p-2.5 border rounded-lg text-sm text-gray-900 dark:text-white bg-gray-50 dark:bg-gray-600 border-gray-300 dark:border-gray-500">
                </div>
                <div class="lessons-container"></div>
                <button type="button"
                    class="add-lesson py-2.5 text-sm px-5 mb-2.5 text-white bg-yellow-500 hover:bg-yellow-600 font-medium rounded-lg dark:bg-yellow-500 dark:hover:bg-yellow-600">Agregar Lección</button>
                <button type="button" class="delete-section py-2 px-3 mt-2 text-red-600 hover:text-red-700">Eliminar Sección</button>
            </div>
        `;e.insertAdjacentHTML("beforeend",o),t++},m=o=>{const c=o.target.previousElementSibling,d=c.querySelectorAll(".flex").length,L=`
            <div class="flex gap-8 my-2 items-center">
                <label for="sections[${t}][lessons][${d}][lesson_name]"
                    class="block min-w-16 text-sm font-medium text-gray-900 dark:text-white">Lección</label>
                <input type="text" name="sections[${t}][lessons][${d}][lesson_name]"
                    id="sections[${t}][lessons][${d}][lesson_name]"
                    class="block w-full p-2.5 border rounded-lg text-sm text-gray-900 dark:text-white bg-gray-50 dark:bg-gray-600 border-gray-300 dark:border-gray-500">
                <button type="button" class="delete-lesson py-2 px-3 text-red-600 hover:text-red-700">Eliminar</button>
            </div>
        `;c.insertAdjacentHTML("beforeend",L)},l=o=>{const c=o.target.closest(".section"),d=c.getAttribute("data-section-id");d&&(s.push(d),n.value=s.join(",")),c.remove()},p=o=>{const c=o.target.closest(".flex"),d=c.getAttribute("data-lesson-id");d&&(r.push(d),a.value=r.join(",")),c.remove()},b=document.querySelector("#add-section");b&&b.addEventListener("click",i),e&&e.addEventListener("click",o=>{o.target.classList.contains("add-lesson")?m(o):o.target.classList.contains("delete-section")?l(o):o.target.classList.contains("delete-lesson")&&p(o)})});
